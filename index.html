<!DOCTYPE html>
<html>
<head>
    <title>DIDComm Query (Alice to Bob)</title> <!-- Set the title of the web page -->
    <link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
    <h1>DIDComm Query</h1> <!-- Display a heading on the web page -->
    
    <!-- Add an input element for message content -->
    <input type="text" id="messageContent" placeholder="Enter your message" value="SELECT * FROM DUAL;">
    
    <!-- Create a button element with an ID for calling the API -->
    <button id="callApiButton">Send query</button>
    
    <!-- Create a div element with an ID for displaying the API response -->
    <div id="apiResponse"></div>

    <!-- Include an external JavaScript file "app.js" -->
    <script src="app.js"></script>

    <script>
        const callApiButton = document.getElementById("callApiButton");
        const apiResponse = document.getElementById("apiResponse");
        const messageContentInput = document.getElementById("messageContent"); // Get the message input element

        callApiButton.addEventListener("click", async () => {
            try {
                const messageContent = messageContentInput.value; // Get the content from the input

                // Send an HTTP GET request to "http://localhost:3200/create-invitation" with the message content
                const response = await fetch(`http://localhost:3200/create-invitation?messageContent=${messageContent}`);

                // Parse the JSON response
                const data = await response.json();

                // Display the JSON data as a string inside the div
                apiResponse.innerHTML = JSON.stringify(data);
            } catch (error) {
                // Handle errors: display an error message in the div
                apiResponse.innerHTML = "Error: " + error.message;
            }
        });
    </script>
</body>
</html>
